<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="a practice to use socket to transport"><title>Network Socket lab</title>
<link rel=canonical href=https://xzxg001.github.io/p/network/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Network Socket lab"><meta property='og:description' content="a practice to use socket to transport"><meta property='og:url' content='https://xzxg001.github.io/p/network/'><meta property='og:site_name' content='xzxg001'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='network'><meta property='article:tag' content='system'><meta property='article:tag' content='python'><meta property='article:tag' content='lab'><meta property='article:published_time' content='2025-04-12T00:00:00+00:00'><meta property='article:modified_time' content='2025-04-12T00:00:00+00:00'><meta property='og:image' content='https://xzxg001.github.io/p/network/image.png'><meta name=twitter:title content="Network Socket lab"><meta name=twitter:description content="a practice to use socket to transport"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://xzxg001.github.io/p/network/image.png'><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=ÂàáÊç¢ËèúÂçï>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_ef0b97d427b7260a.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üç•</span></figure><div class=site-meta><h1 class=site-name><a href=/>xzxg001</a></h1><h2 class=site-description>show my ideas and practices.</h2></div></header><ol class=menu-social><li><a href=https://blog.csdn.net/xzxg001 target=_blank title=xzxg001 rel=me><!doctype html><svg id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="143" height="54" viewBox="0 0 143 54" enable-background="new 0 0 143 54"><image id="image0" width="143" height="54" x="0" y="0" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI8AAAA2CAYAAAD+psouAAAAIGNIUk0AAHomAACAhAAA+gAAAIDo AAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAAFiUAABYlAUlS JPAAABWmSURBVHja7Zx5dFzVfcc/982uWbRrLMmyZEm2vG8CI1s2Fth4j9lXG0ho0qanIYG2ado0 TXpOe5KShrRJ4ARISAmLIQGMMQRsg8HYGOPdsq3FizZrtXaNZp+39I+xRxrJxsPIhqZnPn+9p3nv vt+793vv/d3f7z4JTdM0EiSIA+nLNiDBny8J8SSIm4R4EsRNQjwJ4iYhngRxkxBPgrhJiCdB3CTE kyBuvjDxaKpKV30dVdu3EvC4CXo9yMHAl/3+CcaA/ot4iKYqVG55k51PP0Hu9JkIAfWf7qX09rvI njb9y66DBHHyhYin5fgxdj7zJK5z55ADQRoPHUSSJKavXP1lv3+CMSCuVm4r6PUy2NXJ6V07ObJ5 E92N9Yx8lMlqJb/0WkoqllJ4XRn2LCeSTvdl10mCGLkq4mk5VsnRLW9Q+8H7ePv7Lm+EJJExsZBp S5czc9Va0vLzv+x6SRADV1Q8SijEJ79/lgN/eBlvfx+qonyu+yWdjvSCiSz/23+gqGwhCPFl10+C z+CKicfnGmDXM7/m4KuvoIRCYyrL4nCw/O++x8xVa5H0X4hbliAOroh4gl4P2x5/jMotmz/3aHMp DGYzNz78KKW33YneZPqy6ynBRRhzt5aDQbb97D+ofOtNAHKmTKZw6kRsNhOKquH1BGhtaKel9hRy IDquY01NJX96CZnZqVjMBlRNo7fbzZmjNQycO8dHTz2JKcnK7K/cjJCuQEiqrRFqjqB1tYMAkZkN M+ZDZk7MU6Qsy1RXV1FdVUVPTzcGg4Gi4knMmTOH9PSMmMpQVZXm5mbOnD5FW1srPp8POSSTkprC hPwC5syZg81mH9Or9vb0UFV1gs7OToQQpKalMW3aNJzOcWOvx/OMaeTRVJWjW95g2+OPkZqRzJKv LGLCeCvSRdrBG5DY/UEV1XsPYzAZWbB6CTNnOjHqRz8+pAhOnOhk7zsfYUnL4s6f/YKMgonxGen3 otVVo732G7TawzBiZBR6PcxdjHTHNyCvCPSGixbj8/k4dOggv3v2N9TX1Y1aOVqtVpbdtJx779uA 0+lEuojYe3p6eGXjS+zY8R49PT2XNNloNLJo8fXcedfdTJ48Gf0lbFJVlbbWVlpampmQn096egaN DQ288Pxz7Nv3KcFgMOp6SZKYM2cuD371IabPmI7BYIy36cN1Nxbx9Le28Op3HyXZruOG1aXYkwSK Ch19Ady+ABaTgew0C4bzq++QrHKispXUzBQKJgz1LE9Qo6PHg6pqpNrNpNkNSAJa2728/8Zu0ifN 5NYf/xTd5/V/utrQNj+HtvsdNL/3s69NTkO679uI61eDLvo53V1dPP/8c/zp7beQZXmo8oQYJaK8 vAl846++yaJFi9ENCztomsYf//AKzzz966gyPou0tHRuufU27r1vPUbj6Iaura3hRz/8AR3t7RQX T2JheTmb39iEy+X6zHKTLBbu3XA/d955NxaLJd7mH9u0dWTzJiQtwJLlZdiTBG29fl54eRvNZ9uR FRWdJHCOy+C+e1ZQlOPAoJeYPTcvMkMoGuw51sabr72D1xfuJWazkQXlpaxbNpuccRYWLp/P1j/s 4MzHH1FSsTR241x9aL97DPXIHlDV8N/yJyNdvwaycmBwAI5+gnpoFygyDPSi7diEmFsOKemRYgKB AK/+8Q8R4ej1esrKFrBm7ToyszJxDbjYufMDtm19l0AgQHPzWZ79zdNMmTIVp9MZKUdRFLq6OiPC yc8voOKGGykpKSEjMxMhBN1dXRw8eIBtW9/F7XbT29vDC88/R3d3F488+rfoRoj64IEDdLS3A1Bf X8fZs00Eg8FwAHbGDG6ouJGc3Fy8Xi/HKit5//3tuN1uvD4fL7/0IllZTlasWImIc1Ubu3g0Fc0/ iNpehdLXgqJJHN70RxbeOItkh5H6ln6e/v27FObnsObrS9DLPoSQONF4jiefep2HHljNzGInF0bz oKzy2rsHObD3KLfespIsuxENcIcE72zbRV1TJ48+dBPFRamMG+9k72+foMDWjaQ3oXNOQmQUIQwm 4CIvLofQXn0a9dDu8LnVgXTr1xCr7gHDMOd76a3ojuxBff7naG2N4RFnRHHnOjrYvn0rsixjNBp5 8KsPcfc992IwDE0l80pLuXb+dfzyv39OV1cXHR0dBPz+aJNkGbfbDYAQEitWrGT9/Q9EXTN5cgkL yxexfv39PP74T9n36aeEQiE+2LGD0tJrWFJxQ1RDd3V1Ro5VVSUYDJKcnMLX//IvWb16LfphI/XS ZTdx7/oNPPaTf+fo0aN4vV52friD8vJF2O3x+VexeaGainLuFMEjrxOq+wS19ywNldVIqOQWjsft 19j4xm7mzZxEnjONU639vLe3ilMNrUzPMrPq+lJefu0jul1DS/hjp8/R1NjB/bfeSIpB5lS7i/f3 1VJzso6l5XMQQT+vvLUfWYVpC2bT33GOnsYGlK4zBKu2IVe9g+btv7i9u99Bfe/18LHBhLT+YcSa DdHCCbcizFuE9MhPkFbeg1izHmwpUZfU1Z2ht7cXgIyMDFatWh0lnHAxgsWLr+dbDz9CQcFEKipu JCU1NeoaRZHxeDxhkwx6bA7HJas7PSODv//uPzKvtBQAt3uQ7du2RsR3gQt2XSA1LY2//+73WLfu lijhXGDcuHHct+EBbOfFcub0aQYHB+MSTszi0XwDKHW70Ty9gEDTbHy6dS96vcDhMLL3eDOdzc04 M1LoNaQx5+YNVNXWc7yxF4/BQV6aifRkK59UNkXK3HOwjsl5mZhFiKoOPxOX3kZb7yC79hymzy9Y ecN89u87SnOnm+xsBx6Xh/qqNtBMYTF31SPX7gBGuGwDvahvvwRq2DGWlt2GuOEW+Ky0R0EJ4v5H ENcsGXVdMDgkeI/HS0NDAxdzE4UQLKmo4D8f/znf+vZ3RvXmUGho5NHr9dis1s+s89TUVNauXRdZ dVVWVtI/Ilo/XDySJLFixSoWLFz4meVOnDgx8uze3l6CY9jZENO0pTTsQ/UOABKhBoG7pQ13twvJ BJIEtTX15E3IpfH0GfZVt3Bo9y48gy4Mgx4aW7qYlqnnmnkz2PLuTgw6HQioq6pm4e3LkCSZHdu2 cvDQcbrbW3FYbfS0dZFnlbHZ7Zzr7CUzxY4iy/TVdeP2JZE0Lw8p1Y/S04iuvQYpe1rEVq1yL1pX W7hB052w6p7PFs4FLrHyKJlSgsPhwOVyMTDQz49+9ANWrFjJ8hWryMzMxG63R5xZIQRZWc6LliPL Mp7h4rnMUlwIwcxZs0hJScHtHsTtHuTokSPk5U0YEk9Pd+Q4y+lkzdq1o0bFi9mhnhe/ECJufyd2 8fQ0AqB6LQSqanEZdIQUGb2ix+dXUWQFi9lEdo6TIsVK5+kzFGfnIZnMZGelgOZGMpoIBoK0nT2L hgaShKTXoykBZs6ZSV/nAPokO9m5eVhsFvQ6CavVgqqq9PWHe8dgMEAw4Ec63kxSeS7oAqg9DUPi kUPQeBICvvD5tFJITou7cgCys3O4/Y67eHnji/j9ftyDg7z+2qu8teVNCguLmFxSwrRp05kzd94l l+gAiizjdoenCL3egM1mu+yz09LSGT9+PC0tzQA0NjZG/d7f3x85Li29NkpYl8Lj8UacdqvVdtHp LVZiu1MJN54WEKBpeLxeFEUl5PXTdraTwkkT2fnu+yxbMJ2QwYqrtw9zUhLTZxWTKnyYktOp2neS 8oqF3L5sGhrwX4MKPe4ANoeR8ukT2OE5RVBOwauFKM5Pw2A20Hmuk8yMVKoO1gLg9ftQFBUtpKDJ AqEDLTRs2PV50ZrrQNNAp0NMKEaYk+KuHACTycQ9995HUXExv3/ufzh96iQAwWCQ2toaamtr2L5t K+npGSypqOC+9Ruw20f7M7Ii4z7v8+j1emz2y4sHICcnJ3Lc1Xkucuz3+fD5fJHzZTfdFNMo4nYP opwXj81mRa+7yuIRSelorg50yTJSkhnfuX5kOYQcCnGmppmyZfPY/YGF2vp2SnIcTF45G4RA8XnR Gy0MyBJ1dY08sroMgy78gtfOm8SJ42fIXzgDu+bi5oWTkCxWVK8LWfayY28zRcX52M0WGqtOhyvM 60VRFaQUCxjDvoiwDUV1tVAABs77AUYzZGRfkeSq2Wxm8eLrKSsrY//+fbz33nZO1tTgcrnwer34 /X5aW1vY+NKLfPjBDr7z6N8xf/51UXGeUGj4tKWLOYJsMpsjx8PF0tvbG/G9hBBMnTotpvK8Hs/Q yGOzff7Y2TBicph1eXPDy1jJj7ksF1OOIzI811fV01Tbyj13LafyTCtH6joJCiOS2YqUnEGzV7B9 5wHWrrme3NSh+bhsejZmk54d+6tx6R3oHGmg0+NSDOw5cZY+b4A71lVwaNcxPK5wj9UZ9ZiK0zDP zkQIBWGyocudMWSookSmLKHTg2Vso85IDAYj5eWL+dd//TeeePIpvv/PP2T9hgeYPWduxO9pb2/n 5z/7KYcPHYy6d3DQFWk0vSG2aSt839BqyD5shdbbN+Qs2+32mIN97uHi+SKmLSmrGH1fE3JbNZI1 RMqkdAx7DAQDAQIeLx//6WOuWV7ObesqeG3LTvYerkEnSaiaRkpGBrd9ZREziqLzPhaTgftuLmPn obO8+MrbCE1FU1UQEqXzZ7FhzWwqP67m5OGaSLLVnu7AUmRD6AMg6TBMWoJIGuHTnO+NmqZd1Q3a 6RkZlC9axIKFC3ENDLB//z5+9atf4BoYoLOzk1/98r957vmXIp2su3vIubUmWS8aMR6Jpmm0NDdH zh3DxdMzJJ6MzKyY7fa43RHx2KzWqy8eoTehK1mKZrCgdpwk1WnGYBp6+VAgwKdvf4hzYj7fXL8a RS/oHQxgtxopSDejodHU7Cbgl5lUnIIsq9Se7GN8rp21i4tZVlZEQ6cPRVYZl55ES30PW555C9+I GIQj3YHBakOyWNEXliFlTY6202BAs56fDuQQ2mA/V3tHkCRJpKSmsnzFSmRF5rGf/BiApqYmqk4c Z+as2QD0dHdF7rkQUb4c7e3tdJzrCL+bEEydOrTfu2/YyJOZEVtCFsDj8aCc74xW29hGnpg7p9Cb MEy+AePc27HNXIrRFu0UappGR30jnR0DjE8zMivfzsQME0Jo+IPwwaYP+Wjzh7g8Kmfbg2zf+DZV h0+hamA2CKbmJjEj34bdCGdPNY4SjpAkbLnFmGasxDD3NiTnFBAjzL/g5wAE/NB0OrwCi5MTx4/x xqbXIymAyzF37ryo846OjshxT/dQIjQjhuy7qqrs3/cp/X3h2I7D4WDqtKmR33uHJVYzYhSPpml4 vR7U8+kam9WGfgzbfj/3yC7smRhzp1BYXjHqt6TkZPJyRwe/zEZYeusSlt6xFIdVoiDXzMr7v8LM ayaPysAbjRLjclJGbQIzWW3kzFuAPqsIYb5EdNaShJg4JRx8QkM9tAutt5OYCAXhZCX4wgnUpsZG Hv/Zf/LkE79i48YXo5zVS9E7IlM+3A8ZPm1lZF6+sdvaWtn8xib859Mcs2bPJi1tKOc2fOTJyMyM 6RXDsSbPUHtZk66+wzwSIQQL1j+AJTkl6u/JmekYzaPncklAQb6D4kIHOgkMepg5LY3UlNHXCiDN mYFxxAawzMIiCq6dfxnDJMS8xeHgIED7WbSn/g262sLJz4sRCkJXG+rj30X5l6+hPvlD0DTa2lrp 6uokFAry9ltb2PjSC/T09ER67Ujcbjevv/5q5NxgMDJj5qzIeU/vkLDSMy7e2Jqm4fP5qKmp4vv/ 9D0aGuoBsNns3LR8ZZST3TPM57lUeSORZRm3J7zi0+l0WG22qx8kvBh2p5OKb/4N7/3iceTzvcNs MUYtT+PFZDEh6YZ0bXE4WPrwdzDHsrzNL0asvBc2/hJNkdFO7Ef98cOI+TcgJk5BS04HgwERDKB1 d0BDLeqRj6HtfOrk0EcQClBUVExe3gSqq6tQFIUXnv89Bw7sZ+HCcgoLi0hOSUGSJELBIC0tLRw4 sJ89H++OmLFo0WJSUlIi58N9nv7eXlpbWzAaTaiqgt/vp7Ozk5bmZmqqq/jkkz2RVZZOp2PdLbdw 3XVlUa8Zj88zKsptjW3FdynGtCVj1tqbaauu4tiftqCp6vks05X9GENnMHDTo/9A3pzS2G4QEmLl XRDwoW36bdhxbm1Ae7MJYU5CMxgRkhS2N+AP+0ba0GgiSmaDwURmVhb//C8/5Aff/ycaGsKfDdVU V3Pq5EksFgsGozG8n0dV8fl8BAKBSNxl3Lhx3P/gg1FmDZ+2XnzxeTZv3oQk6VBVFVVV8Qf8+H2+ qA1cer2erz70F9x5592Yh8V7hmfoIfZpS5GjA5XWy+TXLseYxGOyWln68CN4+nqo/3QvHpcHOSSD +SKjj6xD7tajDoQQeh26NAmRHERIo8XmcblRZBmTzUbZhgeZsXL159uGajAibv0aUlom2lsvhHNd wQCaN1zhI58o9HqwpyBmL0Cs/w4IgQDGj8/jiSd/zTPPPMUnn+yhv6+PUCg0Krt9AaPRSE5OLn/1 zb+msLAo6jen04nf7480/KXKkCSJpCQr2dnZ3P/gV0dtKoNwsPDCislstmAxxxbjkWUZr3dIPMnJ yWNp/iuzAd7b18fB117h+Dtvs3TNPAryRxulDlrx729E9YYdT70zDdOcdIQxOqurKBq73q+irSvA NXfczdSlyzEmjSHY19WOVrkXzp5Gaz8LXjcEA2A0gcUK6U5EbgFi6jwoKLloglSWZRoa6jl65DBN TU10dXbS09uDHJLRG8I9ODs7h8klJVx3XRm5ueNHldHQUM/BAwdoa2ulu7sb18AAXq8XWQ6h1xsw WyykpaUxfvx4SkqmMmv27KhpL8qeUIjfPftbjh2rxDluHH/zrW+Tlnb5HJ7b7eZ3z/6WUydrKZky hQcf/BqOMQjoin16o8oy506f4tgbr7BwbjKGkXuTNQnNr6CFdCBUhBGEUYCIvq5nQKbJlcL0VetI Hndl0gtA2DH2+8KOs6qApAtn243msJBieI6maYRCIQJ+P4FgEE1TEUJCp9NhsZgxmcyXdUBDoRDB YIBgMISiKFFlGI1GzGZzTH6j3+/H5/NiMBhJSkq6ZEJ2pP1er5dgIIDFYsE8hi2ocBW+GNVUleot r5ClO0eSUUEX42wTksEdMuKyT6Gk4qbEB39/BlyVz43lYIDOmhPInXUofS1IWgijQWDQS+iksM+h KBAIyqjoUSQT+sxCDFkFjJuS+K8Zfy5ctX90ABDy+Qj5vKDKeHu68A+6CPk8CCFhtNmwpKRjciQj JD2GJCv6GPI9Cf7vcFXFk+D/N4l/K5cgbhLiSRA3CfEkiJuEeBLETUI8CeImIZ4EcZMQT4K4SYgn QdwkxJMgbhLiSRA3CfEkiJv/BcItCVyOzW5IAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI1LTA0LTEy VDAzOjA3OjUyKzAwOjAwLhIaCgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNS0wNC0xMlQwMzowNzo1 MiswMDowMF9PorYAAAAodEVYdGRhdGU6dGltZXN0YW1wADIwMjUtMDQtMTJUMDM6MDc6NTIrMDA6 MDAIWoNpAAAAAElFTkSuQmCC"/></svg></a></li><li><a href=https://github.com/xzxg001 target=_blank title=xzxg001 rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>ÊöóËâ≤Ê®°Âºè</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ÁõÆÂΩï</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#‰∏ÄÂÆûÈ™åÁõÆÁöÑ>‰∏Ä„ÄÅÂÆûÈ™åÁõÆÁöÑÔºö</a></li><li><a href=#‰∫åÂÆûÈ™åÂÜÖÂÆπ>‰∫å„ÄÅÂÆûÈ™åÂÜÖÂÆπÔºö</a><ol><li><a href=#21ÈááÁî®tcpËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èpython>2.1„ÄÅÈááÁî®TCPËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èÔºàpythonÔºâ</a><ol><li><a href=#1ÂÆ¢Êà∑Á´Ø>1.ÂÆ¢Êà∑Á´Ø</a></li><li><a href=#2ÊúçÂä°Á´Ø>2.ÊúçÂä°Á´Ø</a></li><li><a href=#3ËøêË°åÁªìÊûú>3.ËøêË°åÁªìÊûú</a></li></ol></li><li><a href=#22ÈááÁî®udpËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èpython>2.2„ÄÅÈááÁî®UDPËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èÔºàpythonÔºâ</a><ol><li><a href=#1ÂÆ¢Êà∑Á´Ø-1>1.ÂÆ¢Êà∑Á´Ø</a></li><li><a href=#2ÊúçÂä°Á´Ø-1>2.ÊúçÂä°Á´Ø</a></li><li><a href=#3ËøêË°åÁªìÊûú-1>3.ËøêË°åÁªìÊûú</a></li></ol></li><li><a href=#23tcp‰∏éudp‰ΩøÁî®Â•óÊé•Â≠óÁöÑÂºÇÂêå>2.3„ÄÅTCP‰∏éUDP‰ΩøÁî®Â•óÊé•Â≠óÁöÑÂºÇÂêå</a><ol><li><a href=#1ÂàõÂª∫Â•óÊé•Â≠ó>1.ÂàõÂª∫Â•óÊé•Â≠ó</a></li><li><a href=#2ÂèëÈÄÅÊï∞ÊçÆ>2.ÂèëÈÄÅÊï∞ÊçÆ</a></li><li><a href=#3Âª∫Á´ãËøûÊé•>3.Âª∫Á´ãËøûÊé•</a></li></ol></li><li><a href=#24Â§öÁ∫øÁ®ãÁ∫øÁ®ãÊ±†ÂØπÊØî>2.4„ÄÅÂ§öÁ∫øÁ®ã\Á∫øÁ®ãÊ±†ÂØπÊØî</a><ol><li><a href=#1Â§öÁ∫øÁ®ã>Ôºà1ÔºâÂ§öÁ∫øÁ®ã</a></li><li><a href=#2Á∫øÁ®ãÊ±†>Ôºà2ÔºâÁ∫øÁ®ãÊ±†</a></li><li><a href=#3Â§öÁ∫øÁ®ãÁ∫øÁ®ãÊ±†ÁöÑÊØîËæÉ>Ôºà3ÔºâÂ§öÁ∫øÁ®ã/Á∫øÁ®ãÊ±†ÁöÑÊØîËæÉ</a></li></ol></li><li><a href=#25‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñá‰ª∂‰º†ËæìÂä©Êâã>2.5„ÄÅ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñá‰ª∂‰º†ËæìÂä©Êâã</a><ol><li><a href=#ÂÆ¢Êà∑Á´Ø-2>ÂÆ¢Êà∑Á´Ø</a></li><li><a href=#ÊúçÂä°Á´Ø-2>ÊúçÂä°Á´Ø</a></li><li><a href=#ËøêË°åÁªìÊûú-2>ËøêË°åÁªìÊûú</a></li></ol></li></ol></li><li><a href=#‰∏âÂÆûÈ™åÊÄªÁªì>‰∏â„ÄÅÂÆûÈ™åÊÄªÁªì</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/network/><img src=/p/network/image_hu_a0050262caf8e1a6.png srcset="/p/network/image_hu_a0050262caf8e1a6.png 800w, /p/network/image_hu_d6882f70bab4a6ce.png 1600w" width=800 height=800 loading=lazy alt="Featured image of post Network Socket lab"></a></div><div class=article-details><header class=article-category><a href=/categories/network/>Network
</a><a href=/categories/system/>System
</a><a href=/categories/python/>Python
</a><a href=/categories/lab/>Lab</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/network/>Network Socket lab</a></h2><h3 class=article-subtitle>a practice to use socket to transport</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 12, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>ÈòÖËØªÊó∂Èïø: 15 ÂàÜÈíü</time></div></footer></div></header><section class=article-content><h1 id=ÁΩëÁªúÂü∫Á°ÄÁºñÁ®ãÂÆûÈ™åpython3><a href=#%e7%bd%91%e7%bb%9c%e5%9f%ba%e7%a1%80%e7%bc%96%e7%a8%8b%e5%ae%9e%e9%aa%8cpython3 class=header-anchor></a>ÁΩëÁªúÂü∫Á°ÄÁºñÁ®ãÂÆûÈ™å(Python3)</h1><h2 id=‰∏ÄÂÆûÈ™åÁõÆÁöÑ><a href=#%e4%b8%80%e5%ae%9e%e9%aa%8c%e7%9b%ae%e7%9a%84 class=header-anchor></a>‰∏Ä„ÄÅÂÆûÈ™åÁõÆÁöÑÔºö</h2><p>„ÄÄ„ÄÄÈÄöËøáÊú¨ÂÆûÈ™åÔºåÂ≠¶‰π†ÈááÁî®SocketÔºàÂ•óÊé•Â≠óÔºâËÆæËÆ°ÁÆÄÂçïÁöÑÁΩëÁªúÊï∞ÊçÆÊî∂ÂèëÁ®ãÂ∫èÔºåÁêÜËß£Â∫îÁî®Êï∞ÊçÆÂåÖÊòØÂ¶Ç‰ΩïÈÄöËøá‰º†ËæìÂ±ÇËøõË°å‰º†ÈÄÅÁöÑ„ÄÇ</p><h2 id=‰∫åÂÆûÈ™åÂÜÖÂÆπ><a href=#%e4%ba%8c%e5%ae%9e%e9%aa%8c%e5%86%85%e5%ae%b9 class=header-anchor></a>‰∫å„ÄÅÂÆûÈ™åÂÜÖÂÆπÔºö</h2><p>‚Äã SocketÔºàÂ•óÊé•Â≠óÔºâÊòØ‰∏ÄÁßçÊäΩË±°Â±ÇÔºåÂ∫îÁî®Á®ãÂ∫èÈÄöËøáÂÆÉÊù•ÂèëÈÄÅÂíåÊé•Êî∂Êï∞ÊçÆÔºåÂ∞±ÂÉèÂ∫îÁî®Á®ãÂ∫èÊâìÂºÄ‰∏Ä‰∏™Êñá‰ª∂Âè•ÊüÑÔºåÂ∞ÜÊï∞ÊçÆËØªÂÜôÂà∞Á®≥ÂÆöÁöÑÂ≠òÂÇ®Âô®‰∏ä‰∏ÄÊ†∑„ÄÇ‰∏Ä‰∏™socketÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÊ∑ªÂä†Âà∞ÁΩëÁªú‰∏≠ÔºåÂπ∂‰∏éÂ§Ñ‰∫éÂêå‰∏Ä‰∏™ÁΩëÁªú‰∏≠ÁöÑÂÖ∂‰ªñÂ∫îÁî®Á®ãÂ∫èËøõË°åÈÄö‰ø°„ÄÇ‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äÁöÑÂ∫îÁî®Á®ãÂ∫èÂêësocketÂÜôÂÖ•ÁöÑ‰ø°ÊÅØËÉΩÂ§üË¢´Âè¶‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äÁöÑÂè¶‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èËØªÂèñÔºåÂèç‰πã‰∫¶ÁÑ∂„ÄÇ</p><p>‚Äã ‰∏çÂêåÁ±ªÂûãÁöÑsocket‰∏é‰∏çÂêåÁ±ªÂûãÁöÑÂ∫ïÂ±ÇÂçèËÆÆÊóè‰ª•ÂèäÂêå‰∏ÄÂçèËÆÆÊóè‰∏≠ÁöÑ‰∏çÂêåÂçèËÆÆÊ†àÁõ∏ÂÖ≥ËÅî„ÄÇÁé∞Âú®TCP/IPÂçèËÆÆÊóè‰∏≠ÁöÑ‰∏ªË¶ÅsocketÁ±ªÂûã‰∏∫ÊµÅÂ•óÊé•Â≠óÔºàstream socketsÔºâÂíåÊï∞ÊçÆÊä•Â•óÊé•Â≠óÔºàdatagram socketsÔºâ„ÄÇÊµÅÂ•óÊé•Â≠óÂ∞ÜTCP‰Ωú‰∏∫ÂÖ∂Á´ØÂØπÁ´ØÂçèËÆÆÔºàÂ∫ïÂ±Ç‰ΩøÁî®IPÂçèËÆÆÔºâÔºåÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÂèØ‰ø°ËµñÁöÑÂ≠óËäÇÊµÅÊúçÂä°„ÄÇ‰∏Ä‰∏™TCP/IPÊµÅÂ•óÊé•Â≠ó‰ª£Ë°®‰∫ÜTCPËøûÊé•ÁöÑ‰∏ÄÁ´Ø„ÄÇÊï∞ÊçÆÊä•Â•óÊé•Â≠ó‰ΩøÁî®UDPÂçèËÆÆÔºàÂ∫ïÂ±ÇÂêåÊ†∑‰ΩøÁî®IPÂçèËÆÆÔºâÔºåÊèê‰æõ‰∫Ü‰∏Ä‰∏™"Â∞ΩÂäõËÄå‰∏∫"Ôºàbest-effortÔºâÁöÑÊï∞ÊçÆÊä•ÊúçÂä°ÔºåÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•ÈÄöËøáÂÆÉÂèëÈÄÅÊúÄÈïø65500Â≠óËäÇÁöÑ‰∏™‰∫∫‰ø°ÊÅØ„ÄÇ‰∏Ä‰∏™TCP/IPÂ•óÊé•Â≠óÁî±‰∏Ä‰∏™‰∫íËÅîÁΩëÂú∞ÂùÄÔºå‰∏Ä‰∏™Á´ØÂØπÁ´ØÂçèËÆÆÔºàTCPÊàñUDPÂçèËÆÆÔºâ‰ª•Âèä‰∏Ä‰∏™Á´ØÂè£Âè∑ÂîØ‰∏ÄÁ°ÆÂÆö„ÄÇ</p><h3 id=21ÈááÁî®tcpËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èpython><a href=#21%e9%87%87%e7%94%a8tcp%e8%bf%9b%e8%a1%8c%e6%95%b0%e6%8d%ae%e5%8f%91%e9%80%81%e7%9a%84%e7%ae%80%e5%8d%95%e7%a8%8b%e5%ba%8fpython class=header-anchor></a>2.1„ÄÅÈááÁî®TCPËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èÔºàpythonÔºâ</h3><p>TCPÂçèËÆÆÔºå‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºàTCPÔºâÊòØ‰∏ÄÁßçÈù¢ÂêëËøûÊé•ÁöÑ„ÄÅÂèØÈù†ÁöÑ„ÄÅÂü∫‰∫éÂ≠óËäÇÊµÅÁöÑ‰º†ËæìÂ±ÇÈÄö‰ø°ÂçèËÆÆ„ÄÇ</p><p>TCPÈÄö‰ø°ÈúÄË¶ÅÁªèËøáÂàõÂª∫ËøûÊé•„ÄÅÊï∞ÊçÆ‰º†ÈÄÅ„ÄÅÁªàÊ≠¢ËøûÊé•‰∏â‰∏™Ê≠•È™§„ÄÇ</p><p>TCPÈÄö‰ø°Ê®°Âûã‰∏≠ÔºåÂú®ÈÄö‰ø°ÂºÄÂßã‰πãÂâçÔºå‰∏ÄÂÆöË¶ÅÂÖàÂª∫Á´ãÁõ∏ÂÖ≥ÁöÑÈìæÊé•ÔºåÊâçËÉΩÂèëÈÄÅÊï∞ÊçÆÔºåÁ±ª‰ºº‰∫éÁîüÊ¥ª‰∏≠ÊâìÁîµËØù„ÄÇ</p><h4 id=1ÂÆ¢Êà∑Á´Ø><a href=#1%e5%ae%a2%e6%88%b7%e7%ab%af class=header-anchor></a>1.ÂÆ¢Êà∑Á´Ø</h4><p>ÂàõÂª∫ÂÆ¢Êà∑Á´ØÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö</p><p>Ôºà1ÔºâÂØºÂÖ•socketÊ®°Âùó</p><p>Ôºà2ÔºâÂàõÂª∫TCPÂ•óÊé•Â≠ó</p><p>Ôºà3ÔºâÂª∫Á´ãËøûÊé•(Ê†πÊçÆipÂíåport‰∏éÊúçÂä°Á´Ø)</p><p>Ôºà4ÔºâÂèëÊï∞ÊçÆ</p><p>Ôºà5ÔºâÊé•Êî∂ÊúçÂä°Âô®ÂìçÂ∫î</p><p>Ôºà6ÔºâÂÖ≥Èó≠Â•óÊé•Â≠ó</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python</span>
</span></span><span class=line><span class=cl><span class=c1># -*- coding:utf-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>  <span class=c1># ÂØºÂÖ•socketÊ®°ÂùóÔºåÁî®‰∫éÁΩëÁªúÈÄö‰ø°</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ËÆæÁΩÆË¶ÅËøûÊé•ÁöÑÊúçÂä°Âô®IPÂú∞ÂùÄÂíåÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=c1># 127.0.0.1 ÊòØÊú¨Êú∫Âú∞ÂùÄÔºå9999ÊòØÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=n>ip_port</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9999</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂàõÂª∫socketÂØπË±°Ôºå‰ΩøÁî®ÈªòËÆ§ÁöÑTCPÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># ËøûÊé•ÊúçÂä°Âô®</span>
</span></span><span class=line><span class=cl><span class=n>sk</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>ip_port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂêëÊúçÂä°Âô®ÂèëÈÄÅÊï∞ÊçÆÔºåÈúÄË¶ÅÂÖàÁºñÁ†Å</span>
</span></span><span class=line><span class=cl><span class=n>sk</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=s1>&#39;ËØ∑Ê±ÇÂç†È¢ÜÂú∞ÁêÉ&#39;</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Êé•Êî∂ÊúçÂä°Âô®ÁöÑÂìçÂ∫îÊï∞ÊçÆÔºåÊúÄÂ§ßÊé•Êî∂1024Â≠óËäÇ</span>
</span></span><span class=line><span class=cl><span class=n>server_reply</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># Ëß£Á†ÅÂπ∂ÊâìÂç∞ÊúçÂä°Âô®ÁöÑÂìçÂ∫î</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>server_reply</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂÖ≥Èó≠ËøûÊé•</span>
</span></span><span class=line><span class=cl><span class=n>sk</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=2ÊúçÂä°Á´Ø><a href=#2%e6%9c%8d%e5%8a%a1%e7%ab%af class=header-anchor></a>2.ÊúçÂä°Á´Ø</h4><p>ÂàõÂª∫ÊúçÂä°Á´ØÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö</p><p>Ôºà1ÔºâÂØºÂÖ•socketÊ®°Âùó</p><p>Ôºà2ÔºâÂàõÂª∫TCPÂ•óÊé•Â≠ó</p><p>Ôºà3ÔºâÁªëÂÆöipÂíåport</p><p>Ôºà4ÔºâËÆæÁΩÆ‰∏∫Ë¢´Âä®ÁõëÂê¨Ê®°ÂºèÔºåÊúÄÂ§ßÂπ∂ÂèëÊé•Êî∂ÁöÑÊï∞ÈáèÊòØ5(ËÆæÁΩÆÁõëÂê¨Ê®°ÂºèÊâçËÉΩÊòØÊúçÂä°Âô®)</p><p>Ôºà5ÔºâÁ≠âÂæÖÊé•Êî∂ËøûÊé•ËØ∑Ê±ÇÔºåÊé•Êî∂Âà∞ÁöÑÊòØ‰∏Ä‰∏™ÂÖÉÁªÑ ÔºàÂÆ¢Êà∑Á´ØÁöÑsocketÂØπË±°ÔºåÂÆ¢Êà∑Á´ØÂú∞ÂùÄ)</p><p>Ôºà6ÔºâÊé•Êî∂Âπ∂ÊâìÂç∞ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊï∞ÊçÆÔºåÂπ∂ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÂìçÂ∫îÊï∞ÊçÆ</p><p>Ôºà7ÔºâÂÖ≥Èó≠Â•óÊé•Â≠ó</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python</span>
</span></span><span class=line><span class=cl><span class=c1># -*- coding:utf-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>  <span class=c1># ÂØºÂÖ•socketÊ®°ÂùóÔºåÁî®‰∫éÁΩëÁªúÈÄö‰ø°</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ËÆæÁΩÆÊúçÂä°Âô®IPÂú∞ÂùÄÂíåÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=c1># 127.0.0.1 ÊòØÊú¨Êú∫Âú∞ÂùÄ(ÂõûÁéØÂú∞ÂùÄ)Ôºå9999ÊòØÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=n>ip_port</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9999</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂàõÂª∫socketÂØπË±°Ôºå‰ΩøÁî®ÈªòËÆ§ÁöÑTCPÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=c1># ÁªëÂÆöIPÂú∞ÂùÄÂíåÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=n>sk</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=n>ip_port</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># ÂºÄÂßãÁõëÂê¨ÔºåÂèÇÊï∞5Ë°®Á§∫ÂÖÅËÆ∏ÊúÄÂ§ßËøûÊé•Êï∞</span>
</span></span><span class=line><span class=cl><span class=n>sk</span><span class=o>.</span><span class=n>listen</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÊúçÂä°Âô®Êó†ÈôêÂæ™ÁéØÔºåÊåÅÁª≠Á≠âÂæÖÂÆ¢Êà∑Á´ØËøûÊé•</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;server waiting...&#39;</span><span class=p>)</span>  <span class=c1># ÊâìÂç∞Á≠âÂæÖ‰ø°ÊÅØ</span>
</span></span><span class=line><span class=cl>    <span class=c1># accept()‰ºöÁ≠âÂæÖÂπ∂ËøîÂõû‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•</span>
</span></span><span class=line><span class=cl>    <span class=c1># connÊòØÊñ∞ÁöÑÂ•óÊé•Â≠óÂØπË±°ÔºåaddrÊòØËøûÊé•ÂÆ¢Êà∑Á´ØÁöÑÂú∞ÂùÄ</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span><span class=p>,</span> <span class=n>addr</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Êé•Êî∂ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊï∞ÊçÆÔºåÊúÄÂ§ßÊé•Êî∂1024Â≠óËäÇ</span>
</span></span><span class=line><span class=cl>    <span class=n>client_data</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Ëß£Á†ÅÂπ∂ÊâìÂç∞ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊï∞ÊçÆ</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>client_data</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÂìçÂ∫îÊï∞ÊçÆ</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=s1>&#39;‰∏çË¶ÅÂõûÁ≠î,‰∏çË¶ÅÂõûÁ≠î,‰∏çË¶ÅÂõûÁ≠î&#39;</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># ÂÖ≥Èó≠ÂΩìÂâçËøûÊé•</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=3ËøêË°åÁªìÊûú><a href=#3%e8%bf%90%e8%a1%8c%e7%bb%93%e6%9e%9c class=header-anchor></a>3.ËøêË°åÁªìÊûú</h4><p>1.ÊúçÂä°Âô®Â§Ñ‰∫éÂæ™ÁéØÁ≠âÂæÖ‰∏≠</p><p><img src=/images/TCP1.png loading=lazy alt=TCP1></p><p>2.ÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Âô®ÂèëÈÄÅ<code>ËØ∑Ê±ÇÂç†È¢ÜÂú∞ÁêÉ</code>,ÊúçÂä°Âô®Êî∂Âà∞Ê∂àÊÅØÂêéÊâìÂç∞Âá∫Êï∞ÊçÆÂÜÖÂÆπ</p><p><img src=/images/TCP2.png loading=lazy alt=TCP2></p><p>3.ÂÆ¢Êà∑Á´ØÊî∂Âà∞Êù•Ëá™ÊúçÂä°Âô®Á´ØÁöÑÂìçÂ∫î<code>‰∏çË¶ÅÂõûÁ≠î</code></p><p><img src=/images/TCP3.png loading=lazy alt=TCP3></p><p>4.ÊúçÂä°Âô®ÁªßÁª≠Âæ™ÁéØÁ≠âÂæÖ</p><h3 id=22ÈááÁî®udpËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èpython><a href=#22%e9%87%87%e7%94%a8udp%e8%bf%9b%e8%a1%8c%e6%95%b0%e6%8d%ae%e5%8f%91%e9%80%81%e7%9a%84%e7%ae%80%e5%8d%95%e7%a8%8b%e5%ba%8fpython class=header-anchor></a>2.2„ÄÅÈááÁî®UDPËøõË°åÊï∞ÊçÆÂèëÈÄÅÁöÑÁÆÄÂçïÁ®ãÂ∫èÔºàpythonÔºâ</h3><p>‚Äã UDP‚Äî‚ÄîÁî®Êà∑Êï∞ÊçÆÊä•ÂçèËÆÆÔºåÊòØ‰∏Ä‰∏™Êó†ËøûÊé•ÁöÑÁÆÄÂçïÁöÑÈù¢ÂêëÊï∞ÊçÆÊä•ÁöÑËøêËæìÂ±ÇÂçèËÆÆ„ÄÇUDP‰∏çÊèê‰æõÂèØÈù†ÊÄßÔºåÂÆÉÂè™ÊòØÊääÂ∫îÁî®Á®ãÂ∫è‰º†ÁªôIPÂ±ÇÁöÑÊï∞ÊçÆÊä•ÂèëÈÄÅÂá∫ÂéªÔºå‰ΩÜÊòØÂπ∂‰∏çËÉΩ‰øùËØÅÂÆÉ‰ª¨ËÉΩÂà∞ËææÁõÆÁöÑÂú∞„ÄÇÁî±‰∫éUDPÂú®‰º†ËæìÊï∞ÊçÆÊä•Ââç‰∏çÁî®Âú®ÂÆ¢Êà∑ÂíåÊúçÂä°Âô®‰πãÈó¥Âª∫Á´ã‰∏Ä‰∏™ËøûÊé•Ôºå‰∏îÊ≤°ÊúâË∂ÖÊó∂ÈáçÂèëÁ≠âÊú∫Âà∂ÔºåÊïÖËÄå‰º†ËæìÈÄüÂ∫¶ÂæàÂø´„ÄÇÂÆÉ‰∏çÂ±û‰∫éËøûÊé•ÂûãÂçèËÆÆÔºåÂõ†ËÄåÂÖ∑ÊúâËµÑÊ∫êÊ∂àËÄóÂ∞èÔºåÂ§ÑÁêÜÈÄüÂ∫¶Âø´ÁöÑ‰ºòÁÇπÔºåÊâÄ‰ª•ÈÄöÂ∏∏Èü≥È¢ë„ÄÅËßÜÈ¢ëÂíåÊôÆÈÄöÊï∞ÊçÆÂú®‰º†ÈÄÅÊó∂‰ΩøÁî®UDPËæÉÂ§öÔºåÂõ†‰∏∫ÂÆÉ‰ª¨Âç≥‰ΩøÂÅ∂Â∞î‰∏¢Â§±‰∏Ä‰∏§‰∏™Êï∞ÊçÆÂåÖÔºå‰πü‰∏ç‰ºöÂØπÊé•Êî∂ÁªìÊûú‰∫ßÁîüÂ§™Â§ßÂΩ±Âìç„ÄÇ</p><h4 id=1ÂÆ¢Êà∑Á´Ø-1><a href=#1%e5%ae%a2%e6%88%b7%e7%ab%af-1 class=header-anchor></a>1.ÂÆ¢Êà∑Á´Ø</h4><p>ÂàõÂª∫ÂÆ¢Êà∑Á´ØÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö</p><p>Ôºà1ÔºâÂØºÂÖ•socketÊ®°Âùó</p><p>Ôºà2ÔºâÂàõÂª∫UDPÂ•óÊé•Â≠ó</p><p>Ôºà3ÔºâÂÆ¢Êà∑Á´ØÊ†πÊçÆipÂíåportÂæ™ÁéØÂêëÊúçÂä°Á´ØÂèëÈÄÅËØ∑Ê±Ç</p><p>Ôºà4ÔºâÂÖ≥Èó≠Â•óÊé•Â≠ó</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python</span>
</span></span><span class=line><span class=cl><span class=c1># -*- coding:utf-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>  <span class=c1># ÂØºÂÖ•socketÊ®°ÂùóÔºåÁî®‰∫éÁΩëÁªúÈÄö‰ø°</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ËÆæÁΩÆÁõÆÊ†áÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÂíåÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=c1># 127.0.0.1 ÊòØÊú¨Êú∫Âú∞ÂùÄÔºå9999ÊòØÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=n>ip_port</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9999</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂàõÂª∫UDP socketÂØπË±°</span>
</span></span><span class=line><span class=cl><span class=c1># AF_INET Ë°®Á§∫‰ΩøÁî®IPv4ÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=c1># SOCK_DGRAM Ë°®Á§∫‰ΩøÁî®UDPÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=c1># 0 Ë°®Á§∫‰ΩøÁî®ÈªòËÆ§ÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_DGRAM</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂÆ¢Êà∑Á´ØÂæ™ÁéØÂèëÈÄÅÊï∞ÊçÆ</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Ëé∑ÂèñÁî®Êà∑ËæìÂÖ•ÁöÑÊï∞ÊçÆÂπ∂ÂéªÈô§‰∏§Á´ØÁ©∫ÁôΩ</span>
</span></span><span class=line><span class=cl>    <span class=n>inp</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;Êï∞ÊçÆÔºö&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1># Â¶ÇÊûúËæìÂÖ•&#39;exit&#39;ÂàôÈÄÄÂá∫Âæ™ÁéØ</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>inp</span> <span class=o>==</span> <span class=s1>&#39;exit&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=c1># Â∞ÜÊï∞ÊçÆÁºñÁ†ÅÂπ∂ÂèëÈÄÅÂà∞ÊúçÂä°Âô®</span>
</span></span><span class=line><span class=cl>    <span class=c1># sendto()ÊñπÊ≥ïÈúÄË¶ÅÊåáÂÆöÁõÆÊ†áÂú∞ÂùÄ</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>sendto</span><span class=p>(</span><span class=n>inp</span><span class=o>.</span><span class=n>encode</span><span class=p>(),</span> <span class=n>ip_port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂÖ≥Èó≠socketËøûÊé•</span>
</span></span><span class=line><span class=cl><span class=n>sk</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=2ÊúçÂä°Á´Ø-1><a href=#2%e6%9c%8d%e5%8a%a1%e7%ab%af-1 class=header-anchor></a>2.ÊúçÂä°Á´Ø</h4><p>ÂàõÂª∫ÊúçÂä°Á´ØÁöÑÊ≠•È™§Â¶Ç‰∏ãÔºö
Ôºà1ÔºâÂØºÂÖ•socketÊ®°Âùó</p><p>Ôºà2ÔºâÂàõÂª∫UDPÂ•óÊé•Â≠ó</p><p>Ôºà3ÔºâÂ•óÊé•Â≠óÁªëÂÆöÊúçÂä°Á´ØipÂíåport</p><p>Ôºà4ÔºâÊúçÂä°Á´ØÂæ™ÁéØÊé•Êî∂Êù•Ëá™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÔºåËß£Á†ÅÂπ∂ÊâìÂç∞Âá∫Êé•Êî∂Âà∞ÁöÑÊï∞ÊçÆ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python</span>
</span></span><span class=line><span class=cl><span class=c1># -*- coding:utf-8 -*-</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>  <span class=c1># ÂØºÂÖ•socketÊ®°ÂùóÔºåÁî®‰∫éÁΩëÁªúÈÄö‰ø°</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ËÆæÁΩÆÊúçÂä°Âô®IPÂú∞ÂùÄÂíåÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=c1># 127.0.0.1 ÊòØÊú¨Êú∫Âú∞ÂùÄ(ÂõûÁéØÂú∞ÂùÄ)Ôºå9999ÊòØÁ´ØÂè£Âè∑</span>
</span></span><span class=line><span class=cl><span class=n>ip_port</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9999</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂàõÂª∫UDP socketÂØπË±°</span>
</span></span><span class=line><span class=cl><span class=c1># AF_INET Ë°®Á§∫‰ΩøÁî®IPv4ÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=c1># SOCK_DGRAM Ë°®Á§∫‰ΩøÁî®UDPÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=c1># 0 Ë°®Á§∫‰ΩøÁî®ÈªòËÆ§ÂçèËÆÆ</span>
</span></span><span class=line><span class=cl><span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_DGRAM</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÁªëÂÆöÊúçÂä°Âô®Âú∞ÂùÄÂíåÁ´ØÂè£</span>
</span></span><span class=line><span class=cl><span class=n>sk</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=n>ip_port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÊúçÂä°Âô®Êó†ÈôêÂæ™ÁéØÔºåÊåÅÁª≠Êé•Êî∂Êï∞ÊçÆ</span>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Êé•Êî∂UDPÊï∞ÊçÆÔºåÊúÄÂ§ßÊé•Êî∂1024Â≠óËäÇ</span>
</span></span><span class=line><span class=cl>    <span class=c1># UDP‰∏çÈúÄË¶ÅÂª∫Á´ãËøûÊé•ÔºåÁõ¥Êé•Êé•Êî∂Êï∞ÊçÆ</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># Ëß£Á†ÅÂπ∂ÊâìÂç∞Êé•Êî∂Âà∞ÁöÑÊï∞ÊçÆ</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>data</span><span class=o>.</span><span class=n>decode</span><span class=p>())</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=3ËøêË°åÁªìÊûú-1><a href=#3%e8%bf%90%e8%a1%8c%e7%bb%93%e6%9e%9c-1 class=header-anchor></a>3.ËøêË°åÁªìÊûú</h4><p>Ôºà1ÔºâÊúçÂä°Á´ØÂ§Ñ‰∫éÊó†ÈôêÂæ™ÁéØ</p><p><img src=/images/UDP1.png loading=lazy alt=UDP1></p><p>Ôºà2ÔºâÂÆ¢Êà∑Á´ØÂêëÊúçÂä°Á´ØÂèëÈÄÅÊï∞ÊçÆÔºå<code>hi,zlz</code></p><p><img src=/images/UDP2.png loading=lazy alt=UDP2></p><p>Ôºà3ÔºâÊúçÂä°Á´ØÊé•Êî∂Âà∞ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊï∞ÊçÆ</p><p><img src=/images/UDP3.png loading=lazy alt=UDP3></p><h3 id=23tcp‰∏éudp‰ΩøÁî®Â•óÊé•Â≠óÁöÑÂºÇÂêå><a href=#23tcp%e4%b8%8eudp%e4%bd%bf%e7%94%a8%e5%a5%97%e6%8e%a5%e5%ad%97%e7%9a%84%e5%bc%82%e5%90%8c class=header-anchor></a>2.3„ÄÅTCP‰∏éUDP‰ΩøÁî®Â•óÊé•Â≠óÁöÑÂºÇÂêå</h3><h4 id=1ÂàõÂª∫Â•óÊé•Â≠ó><a href=#1%e5%88%9b%e5%bb%ba%e5%a5%97%e6%8e%a5%e5%ad%97 class=header-anchor></a>1.ÂàõÂª∫Â•óÊé•Â≠ó</h4><p>ÂèÇÊï∞1ÔºöfamilyÔºàÁªôÂÆöÁöÑÂ•óÊé•ÊóèÔºâ‰∏ÄËà¨Êúâ‰∏§ÁßçÈáçË¶ÅÂèÇÊï∞</p><p>socket.AF_INETÔºàÁî®‰∫éÊúçÂä°Âô®‰∏éÊúçÂä°Âô®‰πãÈó¥ÁöÑÁΩëÁªúÈÄö‰ø°Ôºâ</p><p>socket.AF_INET6 ÔºàÂü∫‰∫éIPV6ÊñπÂºèÁöÑÊúçÂä°Âô®‰∏éÊúçÂä°Âô®‰πãÈó¥ÁöÑÁΩëÁªúÈÄö‰ø°Ôºâ</p><p>ÂèÇÊï∞2ÔºötypeÔºàÂ•óÊé•Â≠óÁ±ªÂûãÔºâÔºå‰πüÊòØ‰∏ÄËà¨‰∏§‰∏™Á±ªÂûã</p><p><strong>socket.SOCK_STREAM</strong>ÔºàÂü∫‰∫éTCPÁöÑÊµÅÂºèsocketÈÄö‰ø°Ôºâ</p><p><strong>socket.SOCK_DGRAM</strong>ÔºàÂü∫‰∫éUDPÁöÑÊï∞ÊçÆÊä•ÂºèsocketÈÄö‰ø°Ôºâ</p><h4 id=2ÂèëÈÄÅÊï∞ÊçÆ><a href=#2%e5%8f%91%e9%80%81%e6%95%b0%e6%8d%ae class=header-anchor></a>2.ÂèëÈÄÅÊï∞ÊçÆ</h4><p>UDPÂèëÈÄÅÊï∞ÊçÆ‰ΩøÁî®ÁöÑÂáΩÊï∞‰∏∫sendtoÔºåÂÖ∂Ê†ºÂºè‰∏∫Ôºö</p><p>ÂèÇÊï∞1ÔºöË°®Á§∫ÂèëÈÄÅÊï∞ÊçÆÁöÑÂÜÖÂÆπ</p><p>ÂèÇÊï∞2ÔºöË°®Á§∫ÁºñÁ†ÅÊ†ºÂºè</p><p>ÂèÇÊï∞3ÔºöË°®Á§∫ÁõÆÁöÑÂú∞ip</p><p>ÂèÇÊï∞4ÔºöË°®Á§∫ÁõÆÁöÑÂú∞Á´ØÂè£</p><h4 id=3Âª∫Á´ãËøûÊé•><a href=#3%e5%bb%ba%e7%ab%8b%e8%bf%9e%e6%8e%a5 class=header-anchor></a>3.Âª∫Á´ãËøûÊé•</h4><p>UDPÁöÑÊúçÂä°Á´Ø‰∏≠‰∏çÈúÄË¶ÅËÆæÁΩÆÁõëÂê¨Ê®°ÂºèÔºå‰πü‰∏çÈúÄË¶ÅÂª∫Á´ãËøûÊé•ÔºåTCPÈúÄË¶Å‰∏çÊñ≠ÁõëÂê¨Ôºå‰∫ãÂÖàÂª∫Á´ãËøûÊé•„ÄÇ</p><p>ÂÖ∂‰ΩôÊï∞ÊçÆ‰º†ËæìÂÜÖÂÆπÔºå‰∏éÂü∫‰∫éTCPÁöÑ‰º†Ëæì‰∏ÄËá¥„ÄÇ</p><h3 id=24Â§öÁ∫øÁ®ãÁ∫øÁ®ãÊ±†ÂØπÊØî><a href=#24%e5%a4%9a%e7%ba%bf%e7%a8%8b%e7%ba%bf%e7%a8%8b%e6%b1%a0%e5%af%b9%e6%af%94 class=header-anchor></a>2.4„ÄÅÂ§öÁ∫øÁ®ã\Á∫øÁ®ãÊ±†ÂØπÊØî</h3><p>‚Äã ÂΩì‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÂêë‰∏Ä‰∏™Â∑≤ÁªèË¢´ÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÂç†Áî®ÁöÑÊúçÂä°Âô®ÂèëÈÄÅËøûÊé•ËØ∑Ê±ÇÊó∂ÔºåËôΩÁÑ∂ÂÖ∂Âú®ËøûÊé•Âª∫Á´ãÂêéÂç≥ÂèØÂêëÊúçÂä°Âô®Á´ØÂèëÈÄÅÊï∞ÊçÆÔºåÊúçÂä°Âô®Á´ØÂú®Â§ÑÁêÜÂÆåÂ∑≤ÊúâÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇÂâçÔºåÂç¥‰∏ç‰ºöÂØπÊñ∞ÁöÑÂÆ¢Êà∑Á´Ø‰ΩúÂá∫ÂìçÂ∫î„ÄÇ</p><p>‚Äã Âπ∂Ë°åÊúçÂä°Âô®ÔºöÂèØ‰ª•ÂçïÁã¨Â§ÑÁêÜÊØè‰∏Ä‰∏™ËøûÊé•Ôºå‰∏î‰∏ç‰ºö‰∫ßÁîüÂπ≤Êâ∞„ÄÇÂπ∂Ë°åÊúçÂä°Âô®ÂàÜ‰∏∫‰∏§ÁßçÔºö‰∏ÄÂÆ¢Êà∑‰∏ÄÁ∫øÁ®ãÂíåÁ∫øÁ®ãÊ±†„ÄÇ</p><p>‚Äã ÊØè‰∏™Êñ∞Á∫øÁ®ãÈÉΩ‰ºöÊ∂àËÄóÁ≥ªÁªüËµÑÊ∫êÔºöÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÂ∞ÜÂç†Áî®CPUÂë®ÊúüÔºåËÄå‰∏îÊØè‰∏™Á∫øÁ®ãÈÉΩËá™Â∑±ÁöÑÊï∞ÊçÆÁªìÊûÑÔºàÂ¶ÇÔºåÊ†àÔºâ‰πüË¶ÅÊ∂àËÄóÁ≥ªÁªüÂÜÖÂ≠ò„ÄÇÂè¶Â§ñÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãÈòªÂ°ûÔºàblockÔºâÊó∂ÔºåÂ∞Ü‰øùÂ≠òÂÖ∂Áä∂ÊÄÅÔºåÈÄâÊã©Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãËøêË°åÔºåÂπ∂Âú®‰∏ä‰∏ãÊñáËΩ¨Êç¢Ôºàcontext switchÔºâÊó∂ÊÅ¢Â§çÈòªÂ°ûÁ∫øÁ®ãÁöÑÁä∂ÊÄÅ„ÄÇÈöèÁùÄÁ∫øÁ®ãÊï∞ÁöÑÂ¢ûÂä†ÔºåÁ∫øÁ®ãÂ∞ÜÊ∂àËÄóË∂äÊù•Ë∂äÂ§öÁöÑÁ≥ªÁªüËµÑÊ∫ê„ÄÇËøôÂ∞ÜÊúÄÁªàÂØºËá¥Á≥ªÁªüËä±Ë¥πÊõ¥Â§öÁöÑÊó∂Èó¥Êù•Â§ÑÁêÜ‰∏ä‰∏ãÊñáËΩ¨Êç¢ÂíåÁ∫øÁ®ãÁÆ°ÁêÜÔºåÊõ¥Â∞ëÁöÑÊó∂Èó¥Êù•ÂØπËøûÊé•ËøõË°åÊúçÂä°„ÄÇÈÇ£ÁßçÊÉÖÂÜµ‰∏ãÔºåÂä†ÂÖ•‰∏Ä‰∏™È¢ùÂ§ñÁöÑÁ∫øÁ®ãÂÆûÈôÖ‰∏äÂèØËÉΩÂ¢ûÂä†ÂÆ¢Êà∑Á´ØÊÄªÊúçÂä°Êó∂Èó¥„ÄÇ</p><p>‚Äã Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÈôêÂà∂ÊÄªÁ∫øÁ®ãÊï∞Âπ∂ÈáçÂ§ç‰ΩøÁî®Á∫øÁ®ãÊù•ÈÅøÂÖçËøô‰∏™ÈóÆÈ¢ò„ÄÇ‰∏é‰∏∫ÊØè‰∏™ËøûÊé•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ã‰∏çÂêåÔºåÊúçÂä°Âô®Âú®ÂêØÂä®Êó∂ÂàõÂª∫‰∏Ä‰∏™Áî±Âõ∫ÂÆöÊï∞ÈáèÁ∫øÁ®ãÁªÑÊàêÁöÑÁ∫øÁ®ãÊ±†Ôºàthread poolÔºâ„ÄÇÂΩì‰∏Ä‰∏™Êñ∞ÁöÑÂÆ¢Êà∑Á´ØËøûÊé•ËØ∑Ê±Ç‰º†ÂÖ•ÊúçÂä°Âô®ÔºåÂÆÉÂ∞Ü‰∫§ÁªôÁ∫øÁ®ãÊ±†‰∏≠ÁöÑ‰∏Ä‰∏™Á∫øÁ®ãÂ§ÑÁêÜ„ÄÇÂΩìËØ•Á∫øÁ®ãÂ§ÑÁêÜÂÆåËøô‰∏™ÂÆ¢Êà∑Á´ØÂêéÔºåÂèàËøîÂõûÁ∫øÁ®ãÊ±†ÔºåÂπ∂‰∏∫‰∏ã‰∏ÄÊ¨°ËØ∑Ê±ÇÂ§ÑÁêÜÂÅöÂ•ΩÂáÜÂ§á„ÄÇÂ¶ÇÊûúËøûÊé•ËØ∑Ê±ÇÂà∞ËææÊúçÂä°Âô®Êó∂ÔºåÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÊâÄÊúâÁ∫øÁ®ãÈÉΩÂ∑≤ÁªèË¢´Âç†Áî®ÔºåÂÆÉ‰ª¨ÂàôÂú®‰∏Ä‰∏™ÈòüÂàó‰∏≠Á≠âÂæÖÔºåÁõ¥Âà∞ÊúâÁ©∫Èó≤ÁöÑÁ∫øÁ®ãÂèØÁî®„ÄÇ</p><h4 id=1Â§öÁ∫øÁ®ã><a href=#1%e5%a4%9a%e7%ba%bf%e7%a8%8b class=header-anchor></a>Ôºà1ÔºâÂ§öÁ∫øÁ®ã</h4><p>‚Äã ‰∏éÂçïÁ∫øÁ®ã‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÊØèÊ¨°Âª∫Á´ãËµ∑‰∏Ä‰∏™Êñ∞ÁöÑËøûÊé•Êó∂ÔºåÂ∞±‰ΩøÁî®threadingÊ®°ÂùóÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÔºåÂêëÊñ∞ÁöÑÁ∫øÁ®ã‰∏≠‰º†ÂÖ•ËØ•ÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠óÁöÑ‰ø°ÊÅØÔºåÂπ∂‰øùÊåÅÈÄö‰ø°ÔºåÂêåÊó∂ËØ•Á∫øÁ®ãÈúÄË¶ÅÈÄöËøáthread.setDaemon(True)ËÆæÁΩÆ‰∏∫ÂÆàÊä§‰∏ªÁ∫øÁ®ã„ÄÇ</p><p><img src=/images/thread1.png loading=lazy alt=thread1></p><h5 id=ÂÆ¢Êà∑Á´Ø><a href=#%e5%ae%a2%e6%88%b7%e7%ab%af class=header-anchor></a>ÂÆ¢Êà∑Á´Ø</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>  <span class=c1># ÂØºÂÖ•socketÊ®°ÂùóÔºåÁî®‰∫éÁΩëÁªúÈÄö‰ø°</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>  <span class=c1># ÂØºÂÖ•threadingÊ®°ÂùóÔºåÁî®‰∫éÂ§öÁ∫øÁ®ãÁºñÁ®ã</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂÆö‰πâÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÂíåÁ´ØÂè£</span>
</span></span><span class=line><span class=cl><span class=n>ip_port</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9998</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂÆö‰πâÂÆ¢Êà∑Á´ØÁöÑÂ∑•‰ΩúÂáΩÊï∞</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>work</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÂàõÂª∫‰∏Ä‰∏™TCPÂ•óÊé•Â≠ó</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># ËøûÊé•Âà∞ÊúçÂä°Âô®</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>ip_port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>message</span> <span class=o>=</span> <span class=s1>&#39;ÊãîÂ∞ñÁè≠&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;Âè∑Á≠æÂà∞&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>message</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÂÆ¢Êà∑Á´Ø&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÂèëÈÄÅÁ≠æÂà∞ËØ∑Ê±ÇÊàêÂäü</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÂÆ¢Êà∑Á´Ø&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÊàêÂäüÁ≠æÂà∞ÔºåÊé•Êî∂Ê∂àÊÅØ:&#39;</span> <span class=o>+</span> <span class=n>data</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÂÖ≥Èó≠Â•óÊé•Â≠óËøûÊé•</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÂÆ¢Êà∑Á´Ø&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;Êñ≠ÂºÄËøûÊé•ÊàêÂäü</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂàõÂª∫20‰∏™Á∫øÁ®ãÔºåÊ®°Êãü20‰∏™ÂÆ¢Êà∑Á´ØÂêåÊó∂Á≠æÂà∞</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>20</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÔºåÁõÆÊ†áÂáΩÊï∞ÊòØworkÔºåÂèÇÊï∞ÊòØi</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>work</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>i</span><span class=p>,))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># ÂêØÂä®Á∫øÁ®ã</span>
</span></span><span class=line><span class=cl>    <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><p>‚Äã ÂÆ¢Êà∑Á´ØÁöÑÂÆûÁé∞Âü∫‰∫éÂ§öÁ∫øÁ®ã„ÄÇwork‰∏∫Á∫øÁ®ãÁöÑÂ∑•‰ΩúÂáΩÊï∞ÔºåÂÖ∂Ê†∏ÂøÉÂäüËÉΩ‰∏∫ÂàõÂª∫ÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠óÔºå‰ΩøËØ•Â•óÊé•Â≠ó‰∏éÊúçÂä°Âô®Âª∫Á´ãTCPËøûÊé•ÔºåÂêëÊúçÂä°Âô®ÁöÑÂ•óÊé•Â≠óÂèëÈÄÅÊï∞ÊçÆÔºåÊé•ÂèóÊúçÂä°Á´ØÂ•óÊé•Â≠ó‰º†ËæìÁöÑÊï∞ÊçÆ„ÄÇÂÆ¢Êà∑Á´ØÂü∫‰∫éÂ§öÁ∫øÁ®ãÂÆûÁé∞Êï∞ÊçÆÂèëÈÄÅÂèØ‰ª•ÊúâÊïàÂú∞Ê®°ÊãüÁúüÂÆûÁîü‰∫ßÁéØÂ¢É‰∏ãÔºå‰∏çÂêåPC‰∏ªÊú∫ÂêëÊúçÂä°Âô®ÂèëÈÄÅÊï∞ÊçÆÁöÑÁä∂ÊÄÅÔºå‰ªéËÄåÂØπÂ§öÁ∫øÁ®ãÁöÑÂ∑•‰ΩúÊïàÊûúÂä†‰ª•ÂàÜÊûê„ÄÇ</p><h5 id=ÊúçÂä°Á´Ø><a href=#%e6%9c%8d%e5%8a%a1%e7%ab%af class=header-anchor></a>ÊúçÂä°Á´Ø</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>  <span class=c1># ÂØºÂÖ•socketÊ®°ÂùóÔºåÁî®‰∫éÁΩëÁªúÈÄö‰ø°</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>threading</span>  <span class=c1># ÂØºÂÖ•threadingÊ®°ÂùóÔºåÁî®‰∫éÂ§öÁ∫øÁ®ãÁºñÁ®ã</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂÆö‰πâÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÂíåÁ´ØÂè£</span>
</span></span><span class=line><span class=cl><span class=n>ip_port</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9998</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1># ÂÆö‰πâÂ§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁöÑÂáΩÊï∞</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>work</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>addr</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Êé•Êî∂ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊ∂àÊÅØ</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>  <span class=c1># ‰ªéÂÆ¢Êà∑Á´ØÊé•Êî∂ÊúÄÂ§ö1024Â≠óËäÇÁöÑÊï∞ÊçÆÔºåÂπ∂Ëß£Á†Å‰∏∫Â≠óÁ¨¶‰∏≤</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÊúçÂä°Âô®Êé•Êî∂Êù•Ëá™:</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>addr</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÁöÑ‰ø°ÊÅØ,ÂÜÖÂÆπ‰∏∫:&#39;</span> <span class=o>+</span> <span class=n>data</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s1>&#39;‰Ω†Â∑≤Á≠æÂà∞&#39;</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>  <span class=c1># ÂèëÈÄÅ&#34;‰Ω†Â∑≤Á≠æÂà∞&#34;Ê∂àÊÅØÂà∞ÂÆ¢Êà∑Á´Ø</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÊúçÂä°Âô®Âêë&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>addr</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÂõûÂ§çÊ∂àÊÅØ</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÊúçÂä°Âô®‰∏éÂÆ¢Êà∑Á´Ø:</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>addr</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÁöÑËøûÊé•ÂÖ≥Èó≠</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=n>ip_port</span><span class=p>)</span>    <span class=c1># ÁªëÂÆöÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÂíåÁ´ØÂè£</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÂºÄÂßãÁõëÂê¨ÂÆ¢Êà∑Á´ØËøûÊé•ÔºåÊúÄÂ§öÂÖÅËÆ∏5‰∏™ÂÆ¢Êà∑Á´ØÊéíÈòü</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>listen</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;server waiting...&#39;</span><span class=p>)</span>  <span class=c1># ÊâìÂç∞ÊúçÂä°Âô®Á≠âÂæÖËøûÊé•ÁöÑÁä∂ÊÄÅ</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÊúçÂä°Âô®‰∏ªÂæ™ÁéØÔºåÊåÅÁª≠Á≠âÂæÖÂÆ¢Êà∑Á´ØËøûÊé•</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># Êé•ÂèóÂÆ¢Êà∑Á´ØËøûÊé•</span>
</span></span><span class=line><span class=cl>        <span class=n>conn</span><span class=p>,</span> <span class=n>addr</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>  <span class=c1># ÈòªÂ°ûÁ≠âÂæÖÔºåÁõ¥Âà∞ÊúâÂÆ¢Êà∑Á´ØËøûÊé•</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;ÂÆ¢Êà∑Á´Ø:</span><span class=se>\t\t</span><span class=si>{</span><span class=n>addr</span><span class=si>}</span><span class=s1>ËøûÊé•ÊàêÂäü</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>        <span class=c1># ÊâìÂç∞ÂÆ¢Êà∑Á´ØËøûÊé•ÊàêÂäüÁöÑÊ∂àÊÅØ</span>
</span></span><span class=line><span class=cl>        <span class=n>thread</span> <span class=o>=</span> <span class=n>threading</span><span class=o>.</span><span class=n>Thread</span><span class=p>(</span><span class=n>target</span><span class=o>=</span><span class=n>work</span><span class=p>,</span> <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>addr</span><span class=p>),</span> <span class=n>daemon</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># ÂêØÂä®Á∫øÁ®ã</span>
</span></span><span class=line><span class=cl>        <span class=n>thread</span><span class=o>.</span><span class=n>start</span><span class=p>()</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=ËøêË°åÁªìÊûú><a href=#%e8%bf%90%e8%a1%8c%e7%bb%93%e6%9e%9c class=header-anchor></a>ËøêË°åÁªìÊûú</h5><ul><li>ÂÆ¢Êà∑Á´ØÔºö</li></ul><p><img src=/images/thread2.png loading=lazy alt=thread2></p><ul><li>ÊúçÂä°Âô®Á´Ø</li></ul><p><img src=/images/thread3.png loading=lazy alt=thread3></p><h4 id=2Á∫øÁ®ãÊ±†><a href=#2%e7%ba%bf%e7%a8%8b%e6%b1%a0 class=header-anchor></a>Ôºà2ÔºâÁ∫øÁ®ãÊ±†</h4><p>‚Äã ‰ΩøÁî®<code>ThreadPoolExecutor</code>Êù•ÂÆû‰æãÂåñÁ∫øÁ®ãÊ±†ÂØπË±°„ÄÇ‰º†ÂÖ•<code>max_workers</code>ÂèÇÊï∞Êù•ËÆæÁΩÆÁ∫øÁ®ãÊ±†‰∏≠ÊúÄÂ§öËÉΩÂêåÊó∂ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÁõÆ„ÄÇ</p><p>‚Äã ‰ΩøÁî®<code>submit</code>ÂáΩÊï∞Êù•Êèê‰∫§Á∫øÁ®ãÈúÄË¶ÅÊâßË°åÁöÑ‰ªªÂä°ÔºàÂáΩÊï∞ÂêçÂíåÂèÇÊï∞ÔºâÂà∞Á∫øÁ®ãÊ±†‰∏≠ÔºåÂπ∂ËøîÂõûËØ•‰ªªÂä°ÁöÑÊäΩË±°ÂØπË±°„ÄÇ<code>submit()</code>‰∏çÊòØÈòªÂ°ûÁöÑÔºåËÄåÊòØÁ´ãÂç≥ËøîÂõû„ÄÇÈÄöËøá<code>submit</code>ÂáΩÊï∞ËøîÂõûÁöÑ‰ªªÂä°ÊäΩË±°ÂØπË±°ÔºåËÉΩÂ§ü‰ΩøÁî®ÂÖ∂<code>done()</code>ÊñπÊ≥ïÂà§Êñ≠‰ªªÂä°ÊòØÂê¶ÁªìÊùü„ÄÇ</p><p>‚Äã ÈÄöËøá<code>ThreadPoolExecutor()</code>ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÊúÄÂ§ßÂ∑•‰ΩúÁ∫øÁ®ãÊï∞‰∏∫10ÁöÑÁ∫øÁ®ãÊ±†„ÄÇ</p><p>‚Äã Ëã•Â∞ÜÊúçÂä°Âô®Á´ØÁ∫øÁ®ãÊ±†ÊúÄÂ§ßÂ∑•‰ΩúÁ∫øÁ®ãÊï∞ËÆæÁΩÆ‰∏∫ÊØîÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁ∫øÁ®ãÊÄªÊï∞Â∞èÔºåÁî±‰∫éÁ∫øÁ®ãÊ±†Âè™‰ºöÁª¥Êä§ÊúÄÂ§ßÂ∑•‰ΩúÁ∫øÁ®ãÊï∞ÁöÑÁ∫øÁ®ãËøõË°åÂ∑•‰ΩúÔºåÂõ†Ê≠§ÔºåÂΩìÁ∫øÁ®ãÊ±†ÁöÑÁ∫øÁ®ãÂ∑≤Êª°Êó∂ÔºåÂêéÂà∞ÁöÑ‰ªªÂä°ÈúÄË¶ÅÊéíÈòüÁ≠âÂæÖÁ∫øÁ®ãÊ±†ÂØπÂÖ∂ËøõË°åÂ∑•‰ΩúË∞ÉÂ∫¶„ÄÇ</p><h5 id=ÂÆ¢Êà∑Á´Ø-1><a href=#%e5%ae%a2%e6%88%b7%e7%ab%af-1 class=header-anchor></a>ÂÆ¢Êà∑Á´Ø</h5><p>‚Äã ÂíåÂ§öÁ∫øÁ®ãÁöÑÂÆ¢Êà∑Á´ØÂÆåÊàêÁõ∏ÂêåÁöÑÂäüËÉΩÔºåÊâÄ‰ª•Á∫øÁ®ãÊ±†ÁöÑÂÆ¢Êà∑Á´Ø‰ª£Á†Å‰∏éÂ§öÁ∫øÁ®ãÁöÑÁõ∏Âêå„ÄÇ</p><h5 id=ÊúçÂä°Á´Ø-1><a href=#%e6%9c%8d%e5%8a%a1%e7%ab%af-1 class=header-anchor></a>ÊúçÂä°Á´Ø</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>concurrent.futures</span> <span class=kn>import</span> <span class=n>ThreadPoolExecutor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ip_port</span><span class=o>=</span><span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span><span class=mi>9997</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ÂÆö‰πâÂ§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÁöÑÂáΩÊï∞</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>work</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>addr</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Êé•Êî∂ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊ∂àÊÅØ</span>
</span></span><span class=line><span class=cl>    <span class=n>data</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>  <span class=c1># ‰ªéÂÆ¢Êà∑Á´ØÊé•Êî∂ÊúÄÂ§ö1024Â≠óËäÇÁöÑÊï∞ÊçÆÔºåÂπ∂Ëß£Á†Å‰∏∫Â≠óÁ¨¶‰∏≤</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÊúçÂä°Âô®Êé•Êî∂Êù•Ëá™:</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>addr</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÁöÑ‰ø°ÊÅØ,ÂÜÖÂÆπ‰∏∫:&#39;</span> <span class=o>+</span> <span class=n>data</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=s1>&#39;‰Ω†Â∑≤Á≠æÂà∞&#39;</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>  <span class=c1># ÂèëÈÄÅ&#34;‰Ω†Â∑≤Á≠æÂà∞&#34;Ê∂àÊÅØÂà∞ÂÆ¢Êà∑Á´Ø</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÊúçÂä°Âô®Âêë&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>addr</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÂõûÂ§çÊ∂àÊÅØ</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;ÊúçÂä°Âô®‰∏éÂÆ¢Êà∑Á´Ø:</span><span class=se>\t</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>addr</span><span class=p>)</span> <span class=o>+</span> <span class=s1>&#39;ÁöÑËøûÊé•ÂÖ≥Èó≠</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>bind</span><span class=p>(</span><span class=n>ip_port</span><span class=p>)</span>    <span class=c1># ÁªëÂÆöÊúçÂä°Âô®ÁöÑIPÂú∞ÂùÄÂíåÁ´ØÂè£</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÂºÄÂßãÁõëÂê¨ÂÆ¢Êà∑Á´ØËøûÊé•ÔºåÊúÄÂ§öÂÖÅËÆ∏5‰∏™ÂÆ¢Êà∑Á´ØÊéíÈòü</span>
</span></span><span class=line><span class=cl>    <span class=n>sk</span><span class=o>.</span><span class=n>listen</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;server waiting...&#39;</span><span class=p>)</span>  <span class=c1># ÊâìÂç∞ÊúçÂä°Âô®Á≠âÂæÖËøûÊé•ÁöÑÁä∂ÊÄÅ</span>
</span></span><span class=line><span class=cl>    <span class=c1># ÊúçÂä°Âô®‰∏ªÂæ™ÁéØÔºåÊåÅÁª≠Á≠âÂæÖÂÆ¢Êà∑Á´ØËøûÊé•</span>
</span></span><span class=line><span class=cl>    <span class=n>pool</span><span class=o>=</span><span class=n>ThreadPoolExecutor</span><span class=p>(</span><span class=n>max_workers</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>conn</span><span class=p>,</span> <span class=n>addr</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>accept</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>pool</span><span class=o>.</span><span class=n>submit</span><span class=p>(</span><span class=n>work</span><span class=p>,</span> <span class=n>conn</span><span class=p>,</span> <span class=n>addr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s1>&#39;ÂÆ¢Êà∑Á´Ø:</span><span class=se>\t\t</span><span class=si>{</span><span class=n>addr</span><span class=si>}</span><span class=s1>ËøûÊé•ÊàêÂäü&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=ËøêË°åÁªìÊûú-1><a href=#%e8%bf%90%e8%a1%8c%e7%bb%93%e6%9e%9c-1 class=header-anchor></a>ËøêË°åÁªìÊûú</h5><p>ÂÆ¢Êà∑Á´ØÔºö</p><p><img src=/images/threadpool1.png loading=lazy alt=threadpool1></p><p>ÊúçÂä°Á´ØÔºö</p><p><img src=/images/threadpool2.png loading=lazy alt=threadpool2></p><h4 id=3Â§öÁ∫øÁ®ãÁ∫øÁ®ãÊ±†ÁöÑÊØîËæÉ><a href=#3%e5%a4%9a%e7%ba%bf%e7%a8%8b%e7%ba%bf%e7%a8%8b%e6%b1%a0%e7%9a%84%e6%af%94%e8%be%83 class=header-anchor></a>Ôºà3ÔºâÂ§öÁ∫øÁ®ã/Á∫øÁ®ãÊ±†ÁöÑÊØîËæÉ</h4><p>Ôºà1ÔºâÁ∫øÁ®ãÊ±†ÊòØÂú®Á®ãÂ∫èËøêË°åÂºÄÂßãÔºåÂàõÂª∫Â•ΩÁöÑn‰∏™Á∫øÁ®ãÔºåÂπ∂‰∏îËøôn‰∏™Á∫øÁ®ãÊåÇËµ∑Á≠âÂæÖ‰ªªÂä°ÁöÑÂà∞Êù•„ÄÇËÄåÂ§öÁ∫øÁ®ãÊòØÂú®‰ªªÂä°Âà∞Êù•ÂæóÊó∂ÂÄôËøõË°åÂàõÂª∫ÔºåÁÑ∂ÂêéÊâßË°å‰ªªÂä°„ÄÇ</p><p>Ôºà2ÔºâÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊâßË°åÂÆå‰πãÂêé‰∏ç‰ºöÂõûÊî∂Á∫øÁ®ãÔºå‰ºöÁªßÁª≠Â∞ÜÁ∫øÁ®ãÊîæÂú®Á≠âÂæÖÈòüÂàó‰∏≠ÔºõÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÂú®ÊØèÊ¨°‰ªªÂä°ÂÆåÊàê‰πãÂêé‰ºöÂõûÊî∂ËØ•Á∫øÁ®ã„ÄÇ</p><p>Ôºà3ÔºâÁî±‰∫éÁ∫øÁ®ãÊ±†‰∏≠Á∫øÁ®ãÊòØÂàõÂª∫Â•ΩÁöÑÔºåÊâÄ‰ª•Âú®ÊïàÁéá‰∏äÁõ∏ÂØπ‰∫éÂ§öÁ∫øÁ®ã‰ºöÈ´òÂæàÂ§ö„ÄÇ</p><p>Ôºà4ÔºâÁ∫øÁ®ãÊ±†‰πüÂú®È´òÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÊúâÁùÄËæÉÂ•ΩÁöÑÊÄßËÉΩÔºõ‰∏çÂÆπÊòìÊåÇÊéâ„ÄÇÂ§öÁ∫øÁ®ãÂú®ÂàõÂª∫Á∫øÁ®ãÊï∞ËæÉÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºåÂæàÂÆπÊòìÊåÇÊéâ„ÄÇ</p><p>ÊÄªÁªìÔºö</p><ul><li>Â§öÁ∫øÁ®ã<ul><li>ÁâπÁÇπÔºö‰∏∫ÊØè‰∏™ËøûÊé•ÂàõÂª∫Êñ∞Á∫øÁ®ãÔºåÁ∫øÁ®ãÁîüÂëΩÂë®ÊúüÁî±Á®ãÂ∫èÊéßÂà∂„ÄÇ</li><li>‰ºòÁÇπÔºöÂÆûÁé∞ÁÆÄÂçïÔºåÈÄÇÂêàÂ∞ëÈáèÂπ∂Âèë„ÄÇ</li><li>Áº∫ÁÇπÔºöÁ∫øÁ®ãËøáÂ§öÊó∂ËµÑÊ∫êÊ∂àËÄóÂ§ßÔºåÂèØËÉΩÂØºËá¥ÊÄßËÉΩ‰∏ãÈôç„ÄÇ</li></ul></li><li>Á∫øÁ®ãÊ±†<ul><li>ÁâπÁÇπÔºöÈ¢ÑÂÖàÂàõÂª∫Âõ∫ÂÆöÊï∞ÈáèÁöÑÁ∫øÁ®ãÔºå‰ªªÂä°ÂÆåÊàêÂêéÁ∫øÁ®ãÂ§çÁî®„ÄÇ</li><li>‰ºòÁÇπÔºöÂáèÂ∞ëÁ∫øÁ®ãÂàõÂª∫ÂíåÈîÄÊØÅÂºÄÈîÄÔºåÈÄÇÂêàÈ´òÂπ∂ÂèëÂú∫ÊôØ„ÄÇ</li><li>Áº∫ÁÇπÔºöÂÆûÁé∞Á®çÂ§çÊùÇÔºåÈúÄÁÆ°ÁêÜÁ∫øÁ®ãÊï∞Èáè„ÄÇ</li></ul></li><li><strong>‰ΩøÁî®Âú∫ÊôØ</strong>ÔºöÂ§öÁ∫øÁ®ãÈÄÇÂêàÂ∞èÂûãÂ∫îÁî®ÔºåÁ∫øÁ®ãÊ±†ÈÄÇÂêàÂ§ßËßÑÊ®°ÊúçÂä°Âô®Á®ãÂ∫è„ÄÇ</li></ul><h3 id=25‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñá‰ª∂‰º†ËæìÂä©Êâã><a href=#25%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%e6%96%87%e4%bb%b6%e4%bc%a0%e8%be%93%e5%8a%a9%e6%89%8b class=header-anchor></a>2.5„ÄÅ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñá‰ª∂‰º†ËæìÂä©Êâã</h3><p>‚Äã ‰ΩøÁî®TCPËøûÊé•ÔºåÈÄöËøáÈÄâÂÆöÊñá‰ª∂Ë∑ØÂæÑÔºåÂú®ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´ØËøõË°åÊñá‰ª∂‰º†Ëæì</p><p>ÂçèËÆÆÁªìÊûÑÔºö</p><ol><li><strong>Â§¥ÈÉ®</strong>ÔºöÂåÖÂê´Êñá‰ª∂ÂêçÔºàÂ≠óÁ¨¶‰∏≤ÔºâÂíåÊñá‰ª∂Â§ßÂ∞èÔºàÊï¥Êï∞ÔºâÔºå‰ΩøÁî®JSONÁºñÁ†Å„ÄÇ</li><li><strong>Êï∞ÊçÆ</strong>ÔºöÊñá‰ª∂ÂÜÖÂÆπÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇ</li></ol><h4 id=ÂÆ¢Êà∑Á´Ø-2><a href=#%e5%ae%a2%e6%88%b7%e7%ab%af-2 class=header-anchor></a>ÂÆ¢Êà∑Á´Ø</h4><p>Êèê‰æõÊñá‰ª∂Ë∑ØÂæÑÔºåÊñá‰ª∂ÂÜÖÂÆπÂíåÊñá‰ª∂Â§ßÂ∞è</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socket</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>ip_port</span> <span class=o>=</span> <span class=p>(</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9996</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=c1># Create a new socket for each file transfer attempt</span>
</span></span><span class=line><span class=cl>        <span class=n>sk</span> <span class=o>=</span> <span class=n>socket</span><span class=o>.</span><span class=n>socket</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>AF_INET</span><span class=p>,</span> <span class=n>socket</span><span class=o>.</span><span class=n>SOCK_STREAM</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sk</span><span class=o>.</span><span class=n>connect</span><span class=p>(</span><span class=n>ip_port</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>path</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s1>&#39;path: &#39;</span><span class=p>)</span>  <span class=c1># Input file path</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>  <span class=c1># Check if file exists</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Êñá‰ª∂‰∏çÂ≠òÂú®ÔºåËØ∑ÈáçÊñ∞ËæìÂÖ•Ë∑ØÂæÑÔºÅ&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>continue</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>path</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s1>&#39;quit&#39;</span><span class=p>:</span>  <span class=c1># Allow user to exit by typing &#39;quit&#39;</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ÈÄÄÂá∫Á®ãÂ∫è&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>break</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>file_name</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>  <span class=c1># Get file name</span>
</span></span><span class=line><span class=cl>        <span class=n>file_size</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>stat</span><span class=p>(</span><span class=n>path</span><span class=p>)</span><span class=o>.</span><span class=n>st_size</span>  <span class=c1># Get file size</span>
</span></span><span class=line><span class=cl>        <span class=c1># Construct file information string in the format &#34;filename|filesize&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>Informf</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>file_name</span><span class=si>}</span><span class=s2>|</span><span class=si>{</span><span class=n>file_size</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>sk</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>Informf</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>  <span class=c1># Send file information to server</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Wait for server confirmation</span>
</span></span><span class=line><span class=cl>        <span class=n>confirmation</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ÊúçÂä°Âô®Á°ÆËÆ§: </span><span class=si>{</span><span class=n>confirmation</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ÂáÜÂ§á‰∏ä‰º†Êñá‰ª∂...&#34;</span><span class=p>)</span>  <span class=c1># Print preparing to upload message</span>
</span></span><span class=line><span class=cl>        <span class=n>send_size</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># Track sent file size</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=s1>&#39;rb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>  <span class=c1># Open file in binary read mode</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=n>send_size</span> <span class=o>&lt;</span> <span class=n>file_size</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># Read remaining bytes if less than 1024 bytes are left</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>file_size</span> <span class=o>-</span> <span class=n>send_size</span> <span class=o>&lt;</span> <span class=mi>1024</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>file_size</span> <span class=o>-</span> <span class=n>send_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                    <span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span>  <span class=c1># Read 1024 bytes at a time</span>
</span></span><span class=line><span class=cl>                <span class=n>sk</span><span class=o>.</span><span class=n>send</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>  <span class=c1># Send file content to server</span>
</span></span><span class=line><span class=cl>                <span class=n>send_size</span> <span class=o>+=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>  <span class=c1># Update sent size</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Â∑≤ÂèëÈÄÅ: </span><span class=si>{</span><span class=n>send_size</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>file_size</span><span class=si>}</span><span class=s2> Â≠óËäÇ&#34;</span><span class=p>)</span>  <span class=c1># Print progress</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Êñá‰ª∂‰∏ä‰º†ÂÆåÊàêÔºÅ&#39;</span><span class=p>)</span>  <span class=c1># Print upload complete message</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1># Wait for server to confirm file upload completion</span>
</span></span><span class=line><span class=cl>        <span class=n>sk</span><span class=o>.</span><span class=n>shutdown</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>SHUT_WR</span><span class=p>)</span>  <span class=c1># Signal end of sending</span>
</span></span><span class=line><span class=cl>        <span class=n>final_confirmation</span> <span class=o>=</span> <span class=n>sk</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ÊúçÂä°Âô®ÊúÄÁªàÁ°ÆËÆ§: </span><span class=si>{</span><span class=n>final_confirmation</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Êñá‰ª∂‰∏ä‰º†ÊàêÂäüÔºÅ&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>  <span class=c1># Exit loop after successful upload</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>ConnectionRefusedError</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Êó†Ê≥ïËøûÊé•Âà∞ÊúçÂä°Âô®ÔºåËØ∑Ê£ÄÊü•ÊúçÂä°Âô®ÊòØÂê¶ËøêË°åÔºÅ&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>break</span>
</span></span><span class=line><span class=cl>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;ÂèëÁîüÈîôËØØ: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=k>finally</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>sk</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>  <span class=c1># Ensure socket is closed</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;ÂÆ¢Êà∑Á´ØÂ∑≤ÈÄÄÂá∫&#34;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ÊúçÂä°Á´Ø-2><a href=#%e6%9c%8d%e5%8a%a1%e7%ab%af-2 class=header-anchor></a>ÊúçÂä°Á´Ø</h4><p>ÈÄêÊ≠•Êé•Êî∂ÂÆ¢Êà∑Á´Ø‰º†ËæìËøáÊù•ÁöÑÊï∞ÊçÆ</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>socketserver</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyServer</span><span class=p>(</span><span class=n>socketserver</span><span class=o>.</span><span class=n>BaseRequestHandler</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>handle</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>base_path</span> <span class=o>=</span> <span class=sa>r</span><span class=s1>&#39;C:\Users\Lenovo\Desktop\network\lab2\file_save&#39;</span>  <span class=c1># Êñá‰ª∂‰øùÂ≠òÁöÑÁõÆÂΩï</span>
</span></span><span class=line><span class=cl>        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>request</span>  <span class=c1># Ëé∑ÂèñÂÆ¢Êà∑Á´ØËøûÊé•</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;connected...&#39;</span><span class=p>)</span>  <span class=c1># ÊâìÂç∞ËøûÊé•‰ø°ÊÅØ</span>
</span></span><span class=line><span class=cl>        <span class=c1># Êé•Êî∂Êñá‰ª∂ÂêçÂíåÊñá‰ª∂Â§ßÂ∞è</span>
</span></span><span class=line><span class=cl>        <span class=n>pre_data</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>()</span>  <span class=c1># Êé•Êî∂ÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊñá‰ª∂ÂêçÂíåÊñá‰ª∂Â§ßÂ∞è</span>
</span></span><span class=line><span class=cl>        <span class=n>file_name</span><span class=p>,</span> <span class=n>file_size</span> <span class=o>=</span> <span class=n>pre_data</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;|&#39;</span><span class=p>)</span>  <span class=c1># Ëß£ÊûêÊñá‰ª∂ÂêçÂíåÊñá‰ª∂Â§ßÂ∞è</span>
</span></span><span class=line><span class=cl>        <span class=n>file_size</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>file_size</span><span class=p>)</span>  <span class=c1># Â∞ÜÊñá‰ª∂Â§ßÂ∞èËΩ¨Êç¢‰∏∫Êï¥Êï∞</span>
</span></span><span class=line><span class=cl>        <span class=c1># Á°ÆËÆ§Êé•Êî∂ÂáÜÂ§á</span>
</span></span><span class=line><span class=cl>        <span class=n>conn</span><span class=o>.</span><span class=n>sendall</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>file_name</span><span class=si>}</span><span class=s2>Â∑≤ÂèëÈÄÅ&#34;</span><span class=o>.</span><span class=n>encode</span><span class=p>())</span>  <span class=c1># ÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÁ°ÆËÆ§Ê∂àÊÅØ</span>
</span></span><span class=line><span class=cl>        <span class=c1># ÂàõÂª∫‰øùÂ≠òÊñá‰ª∂ÁöÑË∑ØÂæÑ</span>
</span></span><span class=line><span class=cl>        <span class=n>file_dir</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>base_path</span><span class=p>,</span> <span class=n>file_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># Á°Æ‰øùÁõÆÂΩïÂ≠òÂú®</span>
</span></span><span class=line><span class=cl>        <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>base_path</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=c1># ÊâìÂºÄÊñá‰ª∂ÂáÜÂ§áÂÜôÂÖ•</span>
</span></span><span class=line><span class=cl>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>file_dir</span><span class=p>,</span> <span class=s1>&#39;wb&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>recv_size</span> <span class=o>=</span> <span class=mi>0</span>  <span class=c1># Â∑≤Êé•Êî∂ÁöÑÊñá‰ª∂Â§ßÂ∞è</span>
</span></span><span class=line><span class=cl>            <span class=k>while</span> <span class=n>recv_size</span> <span class=o>&lt;</span> <span class=n>file_size</span><span class=p>:</span>  <span class=c1># Âæ™ÁéØÊé•Êî∂Êñá‰ª∂ÂÜÖÂÆπ</span>
</span></span><span class=line><span class=cl>                <span class=n>data</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>recv</span><span class=p>(</span><span class=mi>1024</span><span class=p>)</span>  <span class=c1># Êé•Êî∂Êñá‰ª∂ÂÜÖÂÆπ</span>
</span></span><span class=line><span class=cl>                <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>  <span class=c1># Â∞ÜÊé•Êî∂Âà∞ÁöÑÂÜÖÂÆπÂÜôÂÖ•Êñá‰ª∂</span>
</span></span><span class=line><span class=cl>                <span class=n>recv_size</span> <span class=o>+=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>  <span class=c1># Êõ¥Êñ∞Â∑≤Êé•Êî∂ÁöÑÊñá‰ª∂Â§ßÂ∞è</span>
</span></span><span class=line><span class=cl>                <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Â∑≤Êé•Êî∂: </span><span class=si>{</span><span class=n>recv_size</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>file_size</span><span class=si>}</span><span class=s2> Â≠óËäÇ&#34;</span><span class=p>)</span>  <span class=c1># ÊâìÂç∞Êé•Êî∂ËøõÂ∫¶</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;upload successed.&#39;</span><span class=p>)</span>  <span class=c1># ÊâìÂç∞‰∏ä‰º†ÊàêÂäü‰ø°ÊÅØ</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl><span class=c1># ÂàõÂª∫Â§öÁ∫øÁ®ãTCPÊúçÂä°Âô®</span>
</span></span><span class=line><span class=cl><span class=n>instance</span> <span class=o>=</span> <span class=n>socketserver</span><span class=o>.</span><span class=n>ThreadingTCPServer</span><span class=p>((</span><span class=s1>&#39;127.0.0.1&#39;</span><span class=p>,</span> <span class=mi>9996</span><span class=p>),</span> <span class=n>MyServer</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>instance</span><span class=o>.</span><span class=n>serve_forever</span><span class=p>()</span>  <span class=c1># ÂêØÂä®ÊúçÂä°Âô®</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ËøêË°åÁªìÊûú-2><a href=#%e8%bf%90%e8%a1%8c%e7%bb%93%e6%9e%9c-2 class=header-anchor></a>ËøêË°åÁªìÊûú</h4><p>‚Äã È¶ñÂÖàÂ∞ÜÊÉ≥Ë¶Å‰º†ËæìÁöÑÊñá‰ª∂ÊîæÂà∞file_sendÊñá‰ª∂Â§π‰∏≠ÔºåÊúçÂä°Á´ØËØªÂèñÊñá‰ª∂Âêé‰ºöÂ∞ÜÂÖ∂Â≠òÂÇ®Âà∞file_saveÊñá‰ª∂Â§π‰∏≠</p><p><img src=/images/chat1.png loading=lazy alt=chat1></p><p><img src=/images/chat2.png loading=lazy alt=chat2></p><p><img src=/images/chat3.png loading=lazy alt=chat3></p><h2 id=‰∏âÂÆûÈ™åÊÄªÁªì><a href=#%e4%b8%89%e5%ae%9e%e9%aa%8c%e6%80%bb%e7%bb%93 class=header-anchor></a>‰∏â„ÄÅÂÆûÈ™åÊÄªÁªì</h2><p>‚Äã ÈÄöËøáÊú¨Ê¨°ÂÆûÈ™åÔºåÊàëÊéåÊè°‰∫Ü‰ΩøÁî®socketÂÆûÁé∞TCPÂíåUDPÈÄö‰ø°ÁöÑÂü∫Êú¨ÊñπÊ≥ïÔºåÁêÜËß£‰∫Ü‰∏§ËÄÖÁöÑÊ†∏ÂøÉÂ∑ÆÂºÇÔºöTCPÊèê‰æõÂèØÈù†‰º†ËæìÔºåÈÄÇÂêàÊñá‰ª∂‰º†ËæìÁ≠âÂú∫ÊôØÔºõUDPÈÄüÂ∫¶Âø´‰ΩÜ‰∏çÂèØÈù†ÔºåÈÄÇÂêàÂÆûÊó∂Â∫îÁî®„ÄÇÊ≠§Â§ñÔºåÊàëÂ≠¶‰π†‰∫ÜÂ§öÁ∫øÁ®ãÂíåÁ∫øÁ®ãÊ±†ÁöÑËÆæËÆ°ÔºåÂ§öÁ∫øÁ®ãÈÄöËøá‰∏∫ÊØè‰∏™ËøûÊé•ÂàÜÈÖçÁ∫øÁ®ãÊèêÂçáÂπ∂ÂèëËÉΩÂäõÔºåËÄåÁ∫øÁ®ãÊ±†ÈÄöËøáÁ∫øÁ®ãÂ§çÁî®‰ºòÂåñ‰∫ÜËµÑÊ∫êÂà©Áî®ÔºåÈÄÇÁî®‰∫éÈ´òË¥üËΩΩÁéØÂ¢É„ÄÇÂú®Êñá‰ª∂‰º†Ëæì‰∏≠ÔºåÊàëËÆæËÆ°‰∫ÜÁÆÄÂçïÁöÑÂçèËÆÆÂπ∂Âä†ÂÖ•ÈîôËØØÂ§ÑÁêÜÔºåÊèêÂçá‰∫ÜÁ®ãÂ∫èÂÅ•Â£ÆÊÄß„ÄÇËøôÊ¨°ÂÆûÈ™åËÆ©ÊàëÊ∑±Âàª‰Ωì‰ºöÂà∞ÁΩëÁªúÁºñÁ®ã‰∏≠ÊÄßËÉΩ‰∏éÂèØÈù†ÊÄßÁöÑÊùÉË°°Ôºå‰ª•ÂèäÂπ∂ÂèëÂ§ÑÁêÜÁöÑÂÆûÈôÖÂ∫îÁî®‰ª∑ÂÄº„ÄÇ</p></section><footer class=article-footer><section class=article-tags><a href=/tags/network/>Network</a>
<a href=/tags/system/>System</a>
<a href=/tags/python/>Python</a>
<a href=/tags/lab/>Lab</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under xzxg001</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>ÊúÄÂêéÊõ¥Êñ∞‰∫é Apr 12, 2025 00:00 UTC</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//hugo-theme-stack.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2024 -
2025 xzxg001</section><section class=powerby>‰ΩøÁî® <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> ÊûÑÂª∫<br>‰∏ªÈ¢ò <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> Áî± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> ËÆæËÆ°</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>